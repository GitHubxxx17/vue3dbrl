import{_ as I,$ as z,V as C,Z as N,r as c,o as T,i as M,b as _,c as m,d as a,u as l,U as L,f as w,a2 as k,X as r,p as V,h as D}from"./index-a005ceea.js";import{u as F,L as b,t as B,c as x}from"./useDebounce-90dc4422.js";const i=d=>(V("data-v-8b877e94"),d=d(),D(),d),H={class:"viewTemplate"},j={class:"view_box"},$={class:"user_box"},q={class:"head_portrait"},E=["src"],O={class:"idname"},P={class:"template_box"},U={class:"label"},X=i(()=>a("span",{class:"iconfont icon-shuqianguanli"},null,-1)),Z=i(()=>a("div",{class:"modleId"},null,-1)),A={class:"title"},G={class:"scroll_top"},J=i(()=>a("div",{class:"bcg"},null,-1)),K={class:"interactive"},Q=i(()=>a("i",{class:"iconfont icon-a-shanchulajitong"},null,-1)),R=i(()=>a("i",{class:"vt_text"},"删除",-1)),W=i(()=>a("span",null,"|",-1)),Y={__name:"ViewTemplate",setup(d){const s=z();let o=C(),u=N(),h=c(null),p=c(null),f=c(null),t=c(null),y=c(null);T(()=>{s.showLi.show&&(h.value.innerHTML=s.showLi.curFlash.content,p.value.innerHTML=s.showLi.curFlash.modleTitle),t.value.onclick=F(async n=>{if(t.value.children[1].classList.contains("orange")){let e=await b(s.showLi.curFlash.modleId,!1,u.user.token);console.log("取消点赞成功",e),e.data.msg.content=="取消点赞"&&(s.showLi.curFlash.likeStatus=!1,s.showLi.curFlash.likeNum--),t.value.children[0].classList.remove("icon-dianzan1"),t.value.children[0].classList.add("icon-dianzan"),t.value.children[1].classList.remove("orange")}else{let e=await b(s.showLi.curFlash.modleId,!0,u.user.token);console.log("点赞成功",e),e.data.msg.content=="点赞成功"&&(s.showLi.curFlash.likeStatus=!0,s.showLi.curFlash.likeNum=e.data.msg.data.likeNum),t.value.children[0].classList.add("icon-dianzan1"),t.value.children[0].classList.remove("icon-dianzan"),t.value.children[1].classList.add("orange")}},500)}),M(()=>s.showLi.curFlash,()=>{h.value.innerHTML=s.showLi.curFlash.content});const v=F(async n=>{if(f.value.children[1].classList.contains("orange")){s.showLi.collected=!1;for(let e=0;e<o.tp.length;e++)if(o.tp[e].modleId==s.showLi.curFlash.modleId&&o.tp[e].MStatus){console.log("取消收藏成功！！！"),o.tp[e].MStatus=0,x(o.tp[e].modleId,o.tp[e].MStatus,u.user.token),o.tp.splice(e,1);break}}else{s.showLi.collected=!0;let e=await x(s.showLi.curFlash.modleId,1,u.user.token);console.log("收藏成功！！！",e.data),e.data.msg.content=="收藏成功"&&(o.tp.unshift(s.showLi.curFlash),o.tp[0].MStatus=1)}},500),S=async()=>{let n=await B(s.showLi.curFlash.modleId,0);if(console.log(n),!n.data.msg.data.isPublic){s.showLi.show=!1;for(let e=0;e<s.flashCommunity.length;e++)s.flashCommunity[e].modleId==s.showLi.curFlash.modleId&&s.flashCommunity.splice(e,1)}};return(n,e)=>(_(),m("div",H,[a("div",j,[a("header",null,[a("div",{class:"back iconfont icon-xiangzuojiantou",onClick:e[0]||(e[0]=g=>l(s).showLi.show=!1)}),a("div",$,[a("div",q,[a("img",{src:l(s).showLi.curFlash.base64==""?"src/assets/头像-女学生2.png":l(s).showLi.curFlash.base64},null,8,E)]),a("div",O,L(l(s).showLi.curFlash.nickName),1)])]),a("main",null,[a("div",P,[a("div",U,[X,a("span",null,L(l(s).showLi.curFlash.modleLabel),1)]),Z,a("div",A,[a("h3",{ref_key:"title",ref:p},null,512)]),a("div",{class:"text_box",ref_key:"text_box",ref:h},null,512)])]),a("footer",G,[J,a("div",K,[l(s).showLi.ismind?(_(),m("span",{key:0,class:"shoucang",ref_key:"del",ref:y,onClick:S},[Q,w("  "),R],512)):k("",!0),l(s).showLi.ismind?k("",!0):(_(),m("span",{key:1,class:"shoucang",ref_key:"shoucang",ref:f,onClick:e[1]||(e[1]=(...g)=>l(v)&&l(v)(...g))},[a("i",{class:r(["iconfont",{"icon-shoucang1":!l(s).showLi.collected,"icon-shoucang":l(s).showLi.collected}])},null,2),w("  "),a("i",{class:r(["vt_text",{orange:l(s).showLi.collected}])},"收藏",2)],512)),W,a("span",{class:"dainzan",ref_key:"dianzan",ref:t},[a("i",{class:r(["iconfont",{"icon-dianzan":!l(s).showLi.curFlash.likeStatus,"icon-dianzan1":l(s).showLi.curFlash.likeStatus}])},null,2),w("   "),a("i",{class:r(["vt_text",{orange:l(s).showLi.curFlash.likeStatus}])},L(l(s).showLi.curFlash.likeNum==0?"点赞":l(s).showLi.curFlash.likeNum),3)],512)])])])]))}},as=I(Y,[["__scopeId","data-v-8b877e94"]]);export{as as default};
