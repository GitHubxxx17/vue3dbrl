/* empty css              */import{r as H,o as ue,n as ve,i as I,j as Pe,k as Me,q as Ae,t as p,x as ee,y as te,z as He,A as le,B as ne,C as Ee,D as Q,E as J,G as ke,H as Oe,L as We,I as je,J as _e,K as Fe,a as ce,M as Ce,N as Ve,O as ze,P as Ue,Q as we,R as Ge,S as Ke,_ as fe,T as oe,b as F,c as V,d as n,u as l,w as z,v as qe,U as j,F as me,e as Te,p as ge,h as he,V as pe,W as G,X as W,Y as Je,Z as Ye,m as Qe,$ as Xe,a0 as Ze,a1 as ae,a2 as et}from"./index-075354d6.js";/* empty css                                                                   *//* empty css              */import{m as tt,u as nt,C as ot,S as st}from"./SearchPage-af66f2db.js";import{o as it,B as at,I as lt,u as ct,p as rt,a as dt,P as Be,b as ut,c as ft,d as mt}from"./index-d4b76660.js";import{s as gt,M as ht,J as pt,G as vt,S as _t,a as wt,g as bt,b as yt,F as St,U as be,d as kt}from"./memory-89e92a97.js";/* empty css                                                                 */import{g as Ct}from"./user-e4c24856.js";import"./useDebounce-eb7135ae.js";const Tt=(t,i)=>{const e=H(),r=()=>{e.value=Ae(t).height};return ue(()=>{if(ve(r),i)for(let _=1;_<=3;_++)setTimeout(r,100*_)}),it(()=>ve(r)),I([Pe,Me],r),e};function Bt(t,i){const e=Tt(t,!0);return r=>p("div",{class:i("placeholder"),style:{height:e.value?`${e.value}px`:void 0}},[r()])}const[xe,ye]=ee("action-bar"),Ne=Symbol(xe),xt={placeholder:Boolean,safeAreaInsetBottom:le};var Nt=te({name:xe,props:xt,setup(t,{slots:i}){const e=H(),r=Bt(e,ye),{linkChildren:_}=He(Ne);_();const s=()=>{var w;return p("div",{ref:e,class:[ye(),{"van-safe-area-bottom":t.safeAreaInsetBottom}]},[(w=i.default)==null?void 0:w.call(i)])};return()=>t.placeholder?r(s):s()}});const Lt=ne(Nt),Le={to:[String,Object],url:String,replace:Boolean};function Dt({to:t,url:i,replace:e,$router:r}){t&&r?r[e?"replace":"push"](t):i&&(e?location.replace(i):location.href=i)}function De(){const t=Ee().proxy;return()=>Dt(t)}const[Rt,q]=ee("button"),$t=Q({},Le,{tag:J("button"),text:String,icon:String,type:J("default"),size:J("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:J("button"),loadingSize:ke,loadingText:String,loadingType:String,iconPosition:J("left")});var It=te({name:Rt,props:$t,emits:["click"],setup(t,{emit:i,slots:e}){const r=De(),_=()=>e.loading?e.loading():p(We,{size:t.loadingSize,type:t.loadingType,class:q("loading")},null),s=()=>{if(t.loading)return _();if(e.icon)return p("div",{class:q("icon")},[e.icon()]);if(t.icon)return p(lt,{name:t.icon,class:q("icon"),classPrefix:t.iconPrefix},null)},w=()=>{let a;if(t.loading?a=t.loadingText:a=e.default?e.default():t.text,a)return p("span",{class:q("text")},[a])},S=()=>{const{color:a,plain:h}=t;if(a){const b={color:h?a:"white"};return h||(b.background=a),a.includes("gradient")?b.border=0:b.borderColor=a,b}},g=a=>{t.loading?Oe(a):t.disabled||(i("click",a),r())};return()=>{const{tag:a,type:h,size:b,block:k,round:c,plain:y,square:E,loading:P,disabled:v,hairline:T,nativeType:R,iconPosition:N}=t,U=[q([h,b,{plain:y,block:k,round:c,square:E,loading:P,disabled:v,hairline:T}]),{[at]:T}];return p(a,{type:R,class:U,style:S(),disabled:v,onClick:g},{default:()=>[p("div",{class:q("content")},[N==="left"&&s(),w(),N==="right"&&s()])]})}}});const re=ne(It),[Pt,Mt]=ee("action-bar-button"),At=Q({},Le,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var Ht=te({name:Pt,props:At,setup(t,{slots:i}){const e=De(),{parent:r,index:_}=je(Ne),s=_e(()=>{if(r){const S=r.children[_.value-1];return!(S&&"isButton"in S)}}),w=_e(()=>{if(r){const S=r.children[_.value+1];return!(S&&"isButton"in S)}});return ct({isButton:!0}),()=>{const{type:S,icon:g,text:a,color:h,loading:b,disabled:k}=t;return p(re,{class:Mt([S,{last:w.value,first:s.value}]),size:"large",type:S,icon:g,color:h,loading:b,disabled:k,onClick:e},{default:()=>[i.default?i.default():a]})}}});const Se=ne(Ht),[Et,A,Z]=ee("dialog"),Ot=Q({},rt,{title:String,theme:String,width:ke,message:[String,Function],callback:Function,allowHtml:Boolean,className:Fe,transition:J("van-dialog-bounce"),messageAlign:String,closeOnPopstate:le,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:le,closeOnClickOverlay:Boolean}),Wt=[...dt,"transition","closeOnPopstate"];var Re=te({name:Et,props:Ot,emits:["confirm","cancel","keydown","update:show"],setup(t,{emit:i,slots:e}){const r=H(),_=ce({confirm:!1,cancel:!1}),s=v=>i("update:show",v),w=v=>{var T;s(!1),(T=t.callback)==null||T.call(t,v)},S=v=>()=>{t.show&&(i(v),t.beforeClose?(_[v]=!0,mt(t.beforeClose,{args:[v],done(){w(v),_[v]=!1},canceled(){_[v]=!1}})):w(v))},g=S("cancel"),a=S("confirm"),h=Ue(v=>{var T,R;if(v.target!==((R=(T=r.value)==null?void 0:T.popupRef)==null?void 0:R.value))return;({Enter:t.showConfirmButton?a:we,Escape:t.showCancelButton?g:we})[v.key](),i("keydown",v)},["enter","esc"]),b=()=>{const v=e.title?e.title():t.title;if(v)return p("div",{class:A("header",{isolated:!t.message&&!e.default})},[v])},k=v=>{const{message:T,allowHtml:R,messageAlign:N}=t,U=A("message",{"has-title":v,[N]:N}),X=Ge(T)?T():T;return R&&typeof X=="string"?p("div",{class:U,innerHTML:X},null):p("div",{class:U},[X])},c=()=>{if(e.default)return p("div",{class:A("content")},[e.default()]);const{title:v,message:T,allowHtml:R}=t;if(T){const N=!!(v||e.title);return p("div",{key:R?1:0,class:A("content",{isolated:!N})},[k(N)])}},y=()=>p("div",{class:[ft,A("footer")]},[t.showCancelButton&&p(re,{size:"large",text:t.cancelButtonText||Z("cancel"),class:A("cancel"),style:{color:t.cancelButtonColor},loading:_.cancel,disabled:t.cancelButtonDisabled,onClick:g},null),t.showConfirmButton&&p(re,{size:"large",text:t.confirmButtonText||Z("confirm"),class:[A("confirm"),{[ut]:t.showCancelButton}],style:{color:t.confirmButtonColor},loading:_.confirm,disabled:t.confirmButtonDisabled,onClick:a},null)]),E=()=>p(Lt,{class:A("footer")},{default:()=>[t.showCancelButton&&p(Se,{type:"warning",text:t.cancelButtonText||Z("cancel"),class:A("cancel"),color:t.cancelButtonColor,loading:_.cancel,disabled:t.cancelButtonDisabled,onClick:g},null),t.showConfirmButton&&p(Se,{type:"danger",text:t.confirmButtonText||Z("confirm"),class:A("confirm"),color:t.confirmButtonColor,loading:_.confirm,disabled:t.confirmButtonDisabled,onClick:a},null)]}),P=()=>e.footer?e.footer():t.theme==="round-button"?E():y();return()=>{const{width:v,title:T,theme:R,message:N,className:U}=t;return p(Be,Ce({ref:r,role:"dialog",class:[A([R]),U],style:{width:ze(v)},tabindex:0,"aria-labelledby":T||N,onKeydown:h,"onUpdate:show":s},Ve(t,Wt)),{default:()=>[b(),c(),P()]})}}});let de;const jt={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let Ft=Q({},jt);function Vt(){({instance:de}=tt({setup(){const{state:i,toggle:e}=nt();return()=>p(Re,Ce(i,{"onUpdate:show":e}),null)}}))}function zt(t){return Ke?new Promise((i,e)=>{de||Vt(),de.open(Q({},Ft,t,{callback:r=>{(r==="confirm"?i:e)(r)}}))}):Promise.resolve()}const Y=t=>zt(Q({showCancelButton:!0},t)),Ut=ne(Re),Gt=t=>(ge("data-v-f02787d1"),t=t(),he(),t),Kt={class:"no-touch"},qt={class:"header_left"},Jt={class:"header_right"},Yt=Gt(()=>n("div",{class:"triangle"},null,-1)),Qt={__name:"LearningHeader",props:["tp","newTp"],setup(t){const i=t,e=oe();let r=["考研","教资","通识课"],_=H(null).value,s=H(null).value;const w=a=>{e.isEdit&&(a.stopPropagation(),_.style.transform="scale(1)")},S=a=>{a.target.tagName=="LI"&&(i.newTp.label=a.target.innerHTML,_.style.transform="scale(0)")};I(()=>e.isEdit,(a,h)=>{a&&(s.disabled=!1),h&&(s.disabled=!0)});let g=()=>{e.isCustom?Y({message:"是否退出自定义模式？"}).then(()=>{e.isCustom=!1,e.isWk=!1,e.isEdit=!1}).catch(()=>{}):e.isDictation?Y({message:"是否保存当前学习记录？",beforeClose:a=>new Promise(h=>{setTimeout(()=>{a==="confirm"?(e.ifSave=!0,e.LearningPageIsShow=!1,e.isRecite=!1,e.isDictation=!1,h(!0)):(e.LearningPageIsShow=!1,e.isRecite=!1,e.isDictation=!1,h(!0))},500)})}):(e.LearningPageIsShow=!1,e.isRecite=!1,e.isDictation=!1)};return(a,h)=>(F(),V("header",Kt,[n("div",qt,[n("span",{class:"icon iconfont icon-xiangzuojiantou",onClick:h[0]||(h[0]=(...b)=>l(g)&&l(g)(...b))})]),z(n("input",{class:"title ellipsis",type:"text",ref_key:"title",ref:s,disabled:"","onUpdate:modelValue":h[1]||(h[1]=b=>t.newTp.title=b)},null,512),[[qe,t.newTp.title]]),n("div",Jt,[n("div",{class:"label",onClick:h[2]||(h[2]=b=>w(b))},[n("span",null,j(t.newTp.label),1)]),n("div",{class:"label_menu",ref_key:"label_menu",ref:_},[Yt,n("ul",{onClick:h[3]||(h[3]=b=>S(b))},[(F(!0),V(me,null,Te(l(r),b=>(F(),V("li",{key:b},j(b),1))),128))])],512)])]))}},Xt=fe(Qt,[["__scopeId","data-v-f02787d1"]]),x=t=>(ge("data-v-46a9abb3"),t=t(),he(),t),Zt={class:"no-touch"},en={class:"footer_1"},tn=x(()=>n("span",{class:"icon iconfont icon-tiku"},null,-1)),nn=x(()=>n("div",{class:"name"},"自定义",-1)),on=[tn,nn],sn=x(()=>n("span",{class:"icon iconfont icon-yanjing"},null,-1)),an=x(()=>n("div",{class:"name"},"背诵",-1)),ln=[sn,an],cn=x(()=>n("span",{class:"icon iconfont icon-zhinengmoxie"},null,-1)),rn=x(()=>n("div",{class:"name"},"默写",-1)),dn=[cn,rn],un=x(()=>n("span",{class:"icon iconfont icon-tijiao"},null,-1)),fn=x(()=>n("div",{class:"name"},"提交",-1)),mn=[un,fn],gn={class:"footer_2"},hn=x(()=>n("span",{class:"icon iconfont icon-tiku"},null,-1)),pn=x(()=>n("div",{class:"name"},"编辑",-1)),vn=[hn,pn],_n=x(()=>n("span",{class:"icon iconfont icon--wakuangjiankong"},null,-1)),wn=x(()=>n("div",{class:"name"},"挖空",-1)),bn=[_n,wn],yn=x(()=>n("span",{class:"icon iconfont icon-watian"},null,-1)),Sn=x(()=>n("div",{class:"name"},"系统挖空",-1)),kn=[yn,Sn],Cn=x(()=>n("span",{class:"icon iconfont icon-tijiao"},null,-1)),Tn=x(()=>n("div",{class:"name"},"保存",-1)),Bn=[Cn,Tn],xn={__name:"LearningFooter",props:["newTp"],setup(t){const i=t;let e=oe();const r=pe();let _=()=>{e.isCustom=!0,e.isRecite=!1,e.isDictation=!1,e.isSubmit=!1},s=()=>{e.isRecite=!e.isRecite,e.isDictation=!1,e.isSubmit=!1},w=()=>{e.isDictation=!e.isDictation,e.isRecite=!1,e.isSubmit=!1},S=()=>{e.isDictation&&(e.isSubmit=!0)},g=()=>{e.isWk=!0,e.isEdit=!1},a=k=>{k.stopPropagation(),e.isSystemWk=!0,e.isWk=!1,e.isEdit=!1},h=()=>{e.isEdit=!0,e.isWk=!1},b=()=>{e.isSave=!1,Y({message:"是否保存当前更改？",beforeClose:k=>new Promise(c=>{setTimeout(()=>{if(k==="confirm"){for(let y of r.tp)if(i.newTp.title==y.modleTitle&&i.newTp.modleId!=y.modleId){r.popupIsShow=!0,r.popupCont="标题不能重复",c(!0);return}e.isSave=!0,e.isCustom=!1,c(!0)}else c(!0)},500)})})};return(k,c)=>(F(),V("footer",Zt,[z(n("div",en,[n("ul",null,[n("li",{class:"custom",onClick:c[0]||(c[0]=(...y)=>l(_)&&l(_)(...y))},on),n("li",{class:W(["recite",{choice:l(e).isRecite}]),onClick:c[1]||(c[1]=(...y)=>l(s)&&l(s)(...y))},ln,2),n("li",{class:W(["dictation",{choice:l(e).isDictation}]),onClick:c[2]||(c[2]=(...y)=>l(w)&&l(w)(...y))},dn,2),n("li",{class:W(["tijiao",{choice:l(e).isSubmit}]),onClick:c[3]||(c[3]=(...y)=>l(S)&&l(S)(...y))},mn,2)])],512),[[G,!l(e).isCustom]]),z(n("div",gn,[n("ul",null,[n("li",{class:W(["bianji",{choice:l(e).isEdit}]),onClick:c[4]||(c[4]=(...y)=>l(h)&&l(h)(...y))},vn,2),n("li",{class:W(["wakong",{choice:l(e).isWk}]),onClick:c[5]||(c[5]=(...y)=>l(g)&&l(g)(...y))},bn,2),n("li",{class:W(["SystemWakong",{choice:l(e).isSystemWk}]),onClick:c[6]||(c[6]=(...y)=>l(a)&&l(a)(...y))},kn,2),n("li",{class:"save",onClick:c[7]||(c[7]=(...y)=>l(b)&&l(b)(...y))},Bn)])],512),[[G,l(e).isCustom]])]))}},Nn=fe(xn,[["__scopeId","data-v-46a9abb3"]]),Ln={class:"popup_box"},Dn={class:"circle"},Rn={class:"right"},$n={class:"score"},In={class:"score_title"},Pn={class:"popup2 ani_show"},Mn={class:"popup_box"},An={class:"popup4"},Hn=n("div",{class:"dif_title"},"请选择随机挖空难度：",-1),En={class:"select_diff"},On=n("div",{class:"selection"},[n("div",{class:"context"},"选好了")],-1),Wn={__name:"LearnPage",props:["tp"],setup(t){const i=t,e=oe(),r=pe(),_=Je();let s=H(null),w=[],S=[];const g=ce({title:i.tp.modleTitle,label:i.tp.modleLabel,modleId:i.tp.modleId}),a=ce({state:["陌生","一般","熟练"],score:"",isShow:!1,index:0});let h=H(null);function b(o,d){if(o==0)return`conic-gradient(#fda71c ${d}%, #fef6ea 0%)`;if(o==1)return`conic-gradient(#02c287 ${d}%, #e1fbf2 0%)`;if(o==2)return`conic-gradient(#5133febc ${d}%, #bcb0ffbc 0%)`}const k=()=>{r.popupIsShow=!1,e.isSystemWk=!1};let c=new Map([["简单","easy"],["中等","normal"],["困难","hard"]]),y=H("easy"),E=H([!0,!1,!1]);const P=async o=>{if(o.stopPropagation(),o.target.classList.contains("com")){let d=0;c.forEach((u,m)=>{m==o.target.innerHTML?(E.value[d]=!0,y.value=u):E.value[d]=!1,d++})}if(o.target.classList.contains("context")){let d=await wt(y.value,i.tp.modleId);if(console.log(d),d.data.msg.content=="挖空成功"){e.isSystemWk=!1,s.value.innerHTML=d.data.msg.data.content;for(let u=0;u<s.value.children.length;u++)console.log(s.value.children[u]),s.value.children[u].tagName=="DIV"&&s.value.children[u].classList.add("highlight")}}};ue(()=>{e.LearningPageIsShow&&(g.title=i.tp.modleTitle.replaceAll('<span class="searched">',"").replaceAll("</span>",""),s.value.innerHTML=i.tp.content,e.StartTime=new Date().getTime())}),I(()=>i.tp,()=>{s.value.innerHTML=i.tp.content,g.title=i.tp.modleTitle.replaceAll('<span class="searched">',"").replaceAll("</span>",""),g.label=i.tp.modleLabel,g.modleId=i.tp.modleId,e.haveRecord=!1}),I(()=>e.LearningPageIsShow,async(o,d)=>{if(o&&(e.StartTime=new Date().getTime()),d){e.EndTime=new Date().getTime();let u=(e.EndTime-e.StartTime)/1e3;if(console.log(u),u/60>=1){let m=await gt(Math.round(_.studyTime+u/60));console.log(m)}}}),I(()=>e.isEdit,o=>{o?s.value.setAttribute("contenteditable",!0):s.value.setAttribute("contenteditable",!1)});let v=()=>{let o=window.getSelection();if(e.isWk&&o.toString().length>0){let B=function(C){C.nextSibling&&C.nextSibling.textContent==""&&s.value.removeChild(C.nextSibling)};if(o.anchorNode.parentNode===o.focusNode.parentNode&&o.anchorNode.parentNode.className=="highlight"&&o.focusNode.parentNode.className=="highlight"){T(o.anchorNode.parentNode);return}let d=o.getRangeAt(0),u=document.createElement("div");if(u.setAttribute("class","highlight"),u.innerHTML=d.toString(),o.anchorNode.parentNode.className=="container"||o.focusNode.parentNode.className=="container"||o.anchorNode.parentNode.className!="text_box"&&o.anchorNode.parentNode.className!="highlight")return;if(o.anchorNode.parentNode.className=="text_box"&&o.focusNode.parentNode.className!="highlight"){if(o.focusNode.parentNode.className!="text_box")return}if(o.anchorNode.parentNode.className=="highlight"&&o.focusNode.parentNode.className!="highlight"){if(o.focusNode.parentNode.className!="text_box")return}o.deleteFromDocument(),d.insertNode(u);let m=s.value.children.length;for(let C=0;C<m;C++){let f=s.value.children[C];if(f.tagName=="DIV")for(B(f);f.nextSibling.className=="highlight";)f.innerHTML+=s.value.children[C+1].innerHTML,m--,s.value.removeChild(s.value.children[C+1]),B(f)}}};function T(o){let d=window.getSelection(),u=d.getRangeAt(0),m=document.createTextNode(""),B=document.createTextNode(u.toString());d.deleteFromDocument(),u.insertNode(m);let C=o.childNodes;console.log(C);function f($){let M=document.createElement("div");M.setAttribute("class","highlight"),M.innerHTML=C[$].textContent,s.value.insertBefore(M,o)}C[0].textContent==""?(s.value.insertBefore(B,o),f(2)):(f(0),s.value.insertBefore(B,o),C[1].textContent==""&&C[2].textContent!=""&&f(2)),s.value.removeChild(o)}I(()=>e.isSave,async o=>{if(o){i.tp.content=s.value.innerHTML;let d=await ht(i.tp.content,g.title,1,r.switchLabel(!1,g.label),i.tp.modleId);console.log(d),d.data.msg.code==200&&(i.tp.modleTitle=g.title,i.tp.modleLabel=g.label,e.isSave=!1)}}),I(()=>e.isCustom,async(o,d)=>{o&&(await R(),e.haveRecord&&Y({message:"检测到您有学习记录，重新挖空后会将学习记录清除，您确定要继续吗？"}).then(async()=>{e.restart=1,await EnterDictation(),e.haveRecord=!1}).catch(()=>{e.isCustom=!1}),s.value.innerHTML=i.tp.content),d&&(e.isWk=!1,e.isEdit=!1)}),I(()=>e.isRecite,(o,d)=>{let u=[];for(let m of s.value.children)m.tagName=="DIV"&&u.push(m);if(u.length==0&&(e.isRecite=!1),o&&u.length>0){s.value.innerHTML=i.tp.content;for(let m of s.value.children)m.tagName=="DIV"&&m.classList.add("recite");s.value.onclick=m=>{m.target.classList.contains("highlight")&&m.target.classList.toggle("recite")}}d&&(s.value.innerHTML=i.tp.content)}),I(()=>e.isDictation,async(o,d)=>{let u=[];for(let m of s.value.children)m.tagName=="DIV"&&u.push(m);if(u.length==0&&(e.isDictation=!1),o&&u.length>0){s.value.innerHTML=i.tp.content,w=[];for(let B of s.value.children)B.tagName=="DIV"&&w.push(B.innerHTML);await R(),e.haveRecord&&Y({message:e.isReview?"测到您有复习记录，请问是否继续上次的学习？":"测到您有学习记录，请问是否继续上次的学习？"}).then(async()=>{e.restart=0,await N(),await m()}).catch(async()=>{e.restart=1,await N(),await m()}),e.haveRecord||m();async function m(){for(let B=0,C=0;B<s.value.children.length;B++){let f=s.value.children[B];f.tagName=="DIV"&&(f.setAttribute("data-after",w[B]),f.setAttribute("contenteditable",!0),f.classList.add("input"),e.restart==1?f.innerHTML="":f.innerHTML=S[C]||"",C++,f.onclick=$=>{f.innerHTML==""&&(f.innerHTML=" "),$.stopPropagation()},f.onfocus=()=>{let $=f.innerText;f.onkeyup=()=>{$=f.innerText},f.onkeydown=()=>{f.setAttribute("data-after",w[B].substring($.length))}},f.onblur=()=>{f.onkeydown=null,f.onkeyup=null})}}}d&&!e.isRecite&&(s.value.innerHTML=i.tp.content)}),I(()=>e.isSubmit,o=>{o&&Y({message:"您已经答完了吗?",beforeClose:d=>new Promise(u=>{setTimeout(async()=>{if(d==="confirm"){e.isReview?$e():X("复习中");let m={};for(let f=0,$=0;f<s.value.children.length;f++)s.value.children[f].tagName=="DIV"&&(m[w[$]+""]=s.value.children[f].innerHTML.replace(/&nbsp;/g,""),console.log(w[$],m),$++);console.log(m);let C=(await bt(m)).data.msg;if(console.log(C),C.content=="计算成功"){let f=C.data.total,$=C.data.accuracy;console.log(f),a.score=f,a.isShow=!0,f<60?a.index=0:f<80?a.index=1:a.index=2,h.value.style.background=b(a.index,a.score),e.isDictation=!1;for(let M=0;M<s.value.children.length;M++){let K=function(D){for(let O=1;O<7;O++)D.classList.remove(`myAnswer${O}`)},Ie=function(D,O){O<=20?(K(D),D.classList.add("myAnswer1")):O<=40?(K(D),D.classList.add("myAnswer2")):O<=50?(K(D),D.classList.add("myAnswer3")):O<=70?(K(D),D.classList.add("myAnswer4")):O<=90?(K(D),D.classList.add("myAnswer5")):O<=100&&(K(D),D.classList.add("myAnswer6"))},ie=!1,L=s.value.children[M];L.tagName=="DIV"&&(L.innerHTML!=""?(L.onclick=()=>{ie?(L.innerHTML=w[M],L.classList.add("rightAnswer"),K(L),ie=!1):(L.innerHTML=m[w[M]],Ie(L,$[M]),L.classList.remove("rightAnswer"),ie=!0)},L.onclick()):(L.onclick=null,L.innerHTML=w[M],L.classList.add("rightAnswer"),L.removeAttribute("data-after")))}u(!0)}}else e.isSubmit=!1,u(!0)},500)})})}),I(()=>e.ifSave,o=>{if(o){let d={arr:[]};for(let u=0;u<s.value.children.length;u++)s.value.children[u].tagName=="DIV"&&d.arr.push(s.value.children[u].innerHTML.replace(/&nbsp;/g," "));U(JSON.stringify(d))}});async function R(){e.ifReviewRecord=e.isReview?1:0;let o=await pt(g.modleId,e.ifReviewRecord);console.log(o),e.haveRecord=o.data.msg.data.haveRecord}async function N(){let o=e.isReview?"GetReviewRecord":"GetStudyRecord",d=await vt(o,g.modleId,e.restart);console.log(d),S=d.data.msg.data.record}async function U(o){let d=e.isReview?"SaveReviewRecord":"SaveStudyRecord",u=await _t(d,g.modleId,o,1);console.log(u),e.ifSave=!1}async function X(o){let d=await yt(i.tp.modleId,o);console.log(d),d.data.msg.code==200&&(i.tp.studyStatus=o)}async function $e(){let o=await St(i.tp.modleId);console.log(o)}return(o,d)=>{const u=Ut;return F(),V("div",{class:"learn_page",onClick:k},[p(Xt,{tp:t.tp,newTp:g},null,8,["tp","newTp"]),p(u,{"show-cancel-button":""}),z(n("div",{class:"popup",onClick:d[0]||(d[0]=m=>a.isShow=!1)},[n("div",Ln,[n("div",{class:"left",ref_key:"popupCircle",ref:h},[n("div",Dn,j(a.state[a.index]),1)],512),n("div",Rn,[n("div",$n,j(a.score),1),n("div",In,"本次正确率："+j(a.score)+"%",1)])])],512),[[G,a.isShow]]),z(n("div",Pn,[n("div",Mn,j(l(r).popupCont),1)],512),[[G,l(r).popupIsShow]]),z(n("div",An,[n("div",{class:"popup_box",onClick:P},[Hn,n("div",En,[(F(!0),V(me,null,Te(l(c).keys(),(m,B)=>(F(),V("div",{key:m,class:W(["com",{active:l(E)[B]}])},j(m),3))),128))]),On])],512),[[G,l(e).isSystemWk]]),n("div",{class:"container",onMousedown:d[1]||(d[1]=(...m)=>l(v)&&l(v)(...m))},[n("div",{class:"text_box",ref_key:"text_box",ref:s},null,512)],32),p(Nn,{newTp:g},null,8,["newTp"])])}}};const se=t=>(ge("data-v-d98d56ce"),t=t(),he(),t),jn={class:"memory_base"},Fn={class:""},Vn={class:"header_top"},zn=se(()=>n("span",{class:"icon iconfont icon-a-riqirili"},null,-1)),Un=[zn],Gn={class:"ht_2"},Kn=se(()=>n("span",{class:"icon iconfont icon-guanbi"},null,-1)),qn=[Kn],Jn={class:"delnum"},Yn=se(()=>n("span",{class:"icon iconfont icon-a-shanchulajitong"},null,-1)),Qn=[Yn],Xn={key:0,class:"header_bottom"},Zn=se(()=>n("span",{class:"icon iconfont icon-jiantou_zuoyouqiehuan_o"},null,-1)),eo=[Zn],to={__name:"memory",setup(t){let i=Ye(),e=Qe(),r=pe();const _=Xe();let s=oe(),w=_.searchData,S=H(!0),g=H("记忆库");async function a(){let c=(await Ct()).data.msg;i.user=Object.assign(i.user,c.data.user)}w.isSearch=!1,w.isMemory=!0,ue(()=>{i.isLogin&&(a(),r.getTp(be))});const h=(k,c)=>{S.value=c,c?(k.push("/DueToday"),g.value="记忆库"):(k.push("/MemoryBank"),e.changeBank?g.value="收藏库":g.value="个人库")};I(()=>e.changeBank,k=>{k?g.value="收藏库":g.value="个人库"});const b=async()=>{let k=null;for(let c of r.tp)c.del&&(k=await kt("deleteModle",c.modleId),console.log(k));r.isDelete=!1,k.data.msg.data.deleteSuccess&&r.getTp(be)};return(k,c)=>{const y=Ze("router-view"),E=Be;return F(),V(me,null,[n("div",jn,[n("header",Fn,[n("div",Vn,[z(p(ot,null,{default:ae(()=>[n("div",{class:"calendar",onClick:c[0]||(c[0]=P=>k.$router.push("/calendar"))},Un)]),_:1},512),[[G,!l(r).isDelete]]),z(n("div",Gn,[n("div",{class:"header_left",onClick:c[1]||(c[1]=P=>l(r).isDelete=!1)},qn),n("div",Jn,"共"+j(l(r).delnum)+"项",1),n("div",{class:"header_right",onClick:c[2]||(c[2]=P=>b())},Qn)],512),[[G,l(r).isDelete]])]),l(r).isDelete?et("",!0):(F(),V("div",Xn,[n("div",{class:W(["today_plan_btn hb_btn",{btn_line:l(S)}]),onClick:c[3]||(c[3]=P=>h(k.$router,!0))}," 今日计划 ",2),n("div",{class:W(["base_btn hb_btn",{btn_line:!l(S)}]),onClick:c[5]||(c[5]=P=>h(k.$router,!1))},[n("span",null,j(l(g)),1),z(n("div",{class:"icon_btn",onClick:c[4]||(c[4]=P=>l(e).changeBank=!l(e).changeBank)},eo,512),[[G,!l(S)]])],2)]))]),n("div",{class:W(["container",{container_del:l(r).isDelete}])},[p(y)],2)]),p(E,{show:l(w).isSearch,position:"right",style:{width:"100%",height:"100%"}},{default:ae(()=>[p(st)]),_:1},8,["show"]),p(E,{show:l(s).LearningPageIsShow,position:"right",style:{width:"100%",height:"100%"}},{default:ae(()=>[p(Wn,{tp:l(r).curTp},null,8,["tp"])]),_:1},8,["show"])],64)}}},mo=fe(to,[["__scopeId","data-v-d98d56ce"]]);export{mo as default};
