import{_ as I,$ as z,V as C,Z as N,r as c,o as T,i as M,b as _,c as m,d as o,u as t,U as L,f as w,a2 as v,X as h,p as V,h as D}from"./index-deb0c6b3.js";import{u as F,L as x,t as B,c as y}from"./useDebounce-fa85f4a9.js";const i=d=>(V("data-v-61d0e806"),d=d(),D(),d),H={class:"viewTemplate"},j={class:"view_box"},$={class:"user_box"},q={class:"head_portrait"},E=["src"],O={class:"idname"},P={class:"template_box"},U={class:"label"},X=i(()=>o("span",{class:"iconfont icon-shuqianguanli"},null,-1)),Z=i(()=>o("div",{class:"modleId"},null,-1)),A={class:"title"},G={class:"scroll_top"},J=i(()=>o("div",{class:"bcg"},null,-1)),K={class:"interactive"},Q=i(()=>o("i",{class:"iconfont icon-a-shanchulajitong"},null,-1)),R=i(()=>o("i",{class:"vt_text"},"删除",-1)),W=i(()=>o("span",null,"|",-1)),Y={__name:"ViewTemplate",setup(d){const s=z();let a=C(),r=N(),u=c(null).value,p=c(null).value,f=c(null).value,l=c(null).value,S=c(null).value;T(()=>{s.showLi.show&&(u.innerHTML=s.showLi.curFlash.content,p.innerHTML=s.showLi.curFlash.modleTitle),l.onclick=F(async n=>{if(l.children[1].classList.contains("orange")){let e=await x(s.showLi.curFlash.modleId,!1,r.user.token);console.log("取消点赞成功",e),e.data.msg.content=="取消点赞"&&(s.showLi.curFlash.likeStatus=!1,s.showLi.curFlash.likeNum--),l.children[0].classList.remove("icon-dianzan1"),l.children[0].classList.add("icon-dianzan"),l.children[1].classList.remove("orange")}else{let e=await x(s.showLi.curFlash.modleId,!0,r.user.token);console.log("点赞成功",e),e.data.msg.content=="点赞成功"&&(s.showLi.curFlash.likeStatus=!0,s.showLi.curFlash.likeNum=e.data.msg.data.likeNum),l.children[0].classList.add("icon-dianzan1"),l.children[0].classList.remove("icon-dianzan"),l.children[1].classList.add("orange")}},500)}),M(()=>s.showLi.curFlash,()=>{u.innerHTML=s.showLi.curFlash.content});const g=F(async n=>{if(f.children[1].classList.contains("orange")){s.showLi.collected=!1;for(let e=0;e<a.tp.length;e++)if(a.tp[e].modleId==s.showLi.curFlash.modleId&&a.tp[e].MStatus){console.log("取消收藏成功！！！"),a.tp[e].MStatus=0,y(a.tp[e].modleId,a.tp[e].MStatus,r.user.token),a.tp.splice(e,1);break}}else{s.showLi.collected=!0;let e=await y(s.showLi.curFlash.modleId,1,r.user.token);console.log("收藏成功！！！",e.data),e.data.msg.content=="收藏成功"&&(a.tp.unshift(s.showLi.curFlash),a.tp[0].MStatus=1)}},500),b=async()=>{let n=await B(s.showLi.curFlash.modleId,0);if(console.log(n),!n.data.msg.data.isPublic){s.showLi.show=!1;for(let e=0;e<s.flashCommunity.length;e++)s.flashCommunity[e].modleId==s.showLi.curFlash.modleId&&s.flashCommunity.splice(e,1)}};return(n,e)=>(_(),m("div",H,[o("div",j,[o("header",null,[o("div",{class:"back iconfont icon-xiangzuojiantou",onClick:e[0]||(e[0]=k=>t(s).showLi.show=!1)}),o("div",$,[o("div",q,[o("img",{src:t(s).showLi.curFlash.base64==""?"src/assets/头像-女学生2.png":t(s).showLi.curFlash.base64},null,8,E)]),o("div",O,L(t(s).showLi.curFlash.nickName),1)])]),o("main",null,[o("div",P,[o("div",U,[X,o("span",null,L(t(s).showLi.curFlash.modleLabel),1)]),Z,o("div",A,[o("h3",{ref_key:"title",ref:p},null,512)]),o("div",{class:"text_box",ref_key:"text_box",ref:u},null,512)])]),o("footer",G,[J,o("div",K,[t(s).showLi.ismind?(_(),m("span",{key:0,class:"shoucang",ref_key:"del",ref:S,onClick:b},[Q,w("  "),R],512)):v("",!0),t(s).showLi.ismind?v("",!0):(_(),m("span",{key:1,class:"shoucang",ref_key:"shoucang",ref:f,onClick:e[1]||(e[1]=(...k)=>t(g)&&t(g)(...k))},[o("i",{class:h(["iconfont",{"icon-shoucang1":!t(s).showLi.collected,"icon-shoucang":t(s).showLi.collected}])},null,2),w("  "),o("i",{class:h(["vt_text",{orange:t(s).showLi.collected}])},"收藏",2)],512)),W,o("span",{class:"dainzan",ref_key:"dianzan",ref:l},[o("i",{class:h(["iconfont",{"icon-dianzan":!t(s).showLi.curFlash.likeStatus,"icon-dianzan1":t(s).showLi.curFlash.likeStatus}])},null,2),w("   "),o("i",{class:h(["vt_text",{orange:t(s).showLi.curFlash.likeStatus}])},L(t(s).showLi.curFlash.likeNum==0?"点赞":t(s).showLi.curFlash.likeNum),3)],512)])])])]))}},os=I(Y,[["__scopeId","data-v-61d0e806"]]);export{os as default};
