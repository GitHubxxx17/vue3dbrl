import{aj as ie,Q as ue,ak as F,i as S,C as de,D as T,x as w,y as k,J as z,O as b,t as v,G as g,E as y,A as I,ad as R,al as fe,B as D,S as ve,am as G,an as L,ao as M,ap as U,af as me,aq as he,M as Z,K as Y,ar as ye,as as ge,at as be,H,r as $,au as W,av as q,aw as Ie,w as J,W as Q,n as Oe,o as Pe,ax as xe,F as Se}from"./index-075354d6.js";const A="van-hairline",Je=`${A}--top`,Qe=`${A}--left`,Xe=`${A}--surround`,we="van-haptics-feedback";function ke(e,{args:t=[],done:n,canceled:s}){if(e){const a=e.apply(null,t);ie(a)?a.then(l=>{l?n():s&&s()}).catch(ue):a?n():s&&s()}else n()}const X=Symbol();function et(e){const t=F(X,null);t&&S(t,n=>{n&&e()})}function Ce(e){const t=de();t&&T(t.proxy,e)}const[Ee,j]=w("badge"),Be={dot:Boolean,max:g,tag:y("div"),color:String,offset:Array,content:g,showZero:I,position:y("top-right")};var Re=k({name:Ee,props:Be,setup(e,{slots:t}){const n=()=>{if(t.content)return!0;const{content:o,showZero:r}=e;return R(o)&&o!==""&&(r||o!==0&&o!=="0")},s=()=>{const{dot:o,max:r,content:i}=e;if(!o&&n())return t.content?t.content():R(r)&&fe(i)&&+i>+r?`${r}+`:i},a=o=>o.startsWith("-")?o.replace("-",""):`-${o}`,l=z(()=>{const o={background:e.color};if(e.offset){const[r,i]=e.offset,{position:f}=e,[d,m]=f.split("-");t.default?(typeof i=="number"?o[d]=b(d==="top"?i:-i):o[d]=d==="top"?b(i):a(i),typeof r=="number"?o[m]=b(m==="left"?r:-r):o[m]=m==="left"?b(r):a(r)):(o.marginTop=b(i),o.marginLeft=b(r))}return o}),c=()=>{if(n()||e.dot)return v("div",{class:j([e.position,{dot:e.dot,fixed:!!t.default}]),style:l.value},[s()])};return()=>{if(t.default){const{tag:o}=e;return v(o,{class:j("wrapper")},{default:()=>[t.default(),c()]})}return c()}}});const $e=D(Re);let ee=2e3;const Te=()=>++ee,ze=e=>{ee=e},[te,De]=w("config-provider"),ne=Symbol(te),_e={tag:y("div"),theme:y("light"),zIndex:Number,themeVars:Object,themeVarsDark:Object,themeVarsLight:Object,iconPrefix:String};function Le(e){const t={};return Object.keys(e).forEach(n=>{t[`--van-${he(n)}`]=e[n]}),t}k({name:te,props:_e,setup(e,{slots:t}){const n=z(()=>Le(T({},e.themeVars,e.theme==="dark"?e.themeVarsDark:e.themeVarsLight)));if(ve){const s=()=>{document.documentElement.classList.add(`van-theme-${e.theme}`)},a=(l=e.theme)=>{document.documentElement.classList.remove(`van-theme-${l}`)};S(()=>e.theme,(l,c)=>{c&&a(c),s()},{immediate:!0}),G(s),L(a),M(a)}return U(ne,e),me(()=>{e.zIndex!==void 0&&ze(e.zIndex)}),()=>v(e.tag,{class:De(),style:n.value},{default:()=>{var s;return[(s=t.default)==null?void 0:s.call(t)]}})}});const[Ae,N]=w("icon"),Ve=e=>e==null?void 0:e.includes("/"),je={dot:Boolean,tag:y("i"),name:String,size:g,badge:g,color:String,badgeProps:Object,classPrefix:String};var Ne=k({name:Ae,props:je,setup(e,{slots:t}){const n=F(ne,null),s=z(()=>e.classPrefix||(n==null?void 0:n.iconPrefix)||N());return()=>{const{tag:a,dot:l,name:c,size:o,badge:r,color:i}=e,f=Ve(c);return v($e,Z({dot:l,tag:a,class:[s.value,f?"":`${s.value}-${c}`],style:{color:i,fontSize:b(o)},content:r},e.badgeProps),{default:()=>{var d;return[(d=t.default)==null?void 0:d.call(t),f&&v("img",{class:N("image"),src:c},null)]}})}}});const Ke=D(Ne),oe={show:Boolean,zIndex:g,overlay:I,duration:g,teleport:[String,Object],lockScroll:I,lazyRender:I,beforeClose:Function,overlayStyle:Object,overlayClass:Y,transitionAppear:Boolean,closeOnClickOverlay:I},tt=Object.keys(oe);let x=0;const K="van-overflow-hidden";function pe(e,t){const n=ye(),s="01",a="10",l=f=>{n.move(f);const d=n.deltaY.value>0?a:s,m=be(f.target,e.value),{scrollHeight:P,offsetHeight:C,scrollTop:E}=m;let O="11";E===0?O=C>=P?"00":"01":E+C>=P&&(O="10"),O!=="11"&&n.isVertical()&&!(parseInt(O,2)&parseInt(d,2))&&H(f,!0)},c=()=>{document.addEventListener("touchstart",n.start),document.addEventListener("touchmove",l,{passive:!1}),x||document.body.classList.add(K),x++},o=()=>{x&&(document.removeEventListener("touchstart",n.start),document.removeEventListener("touchmove",l),x--,x||document.body.classList.remove(K))},r=()=>t()&&c(),i=()=>t()&&o();ge(r),L(i),M(i),S(t,f=>{f?c():o()})}function ae(e){const t=$(!1);return S(e,n=>{n&&(t.value=n)},{immediate:!0}),n=>()=>t.value?n():null}const[Fe,Ge]=w("overlay"),Me={show:Boolean,zIndex:g,duration:g,className:Y,lockScroll:I,lazyRender:I,customStyle:Object};var Ue=k({name:Fe,props:Me,setup(e,{slots:t}){const n=$(),s=ae(()=>e.show||!e.lazyRender),a=c=>{e.lockScroll&&H(c,!0)},l=s(()=>{var c;const o=T(Ie(e.zIndex),e.customStyle);return R(e.duration)&&(o.animationDuration=`${e.duration}s`),J(v("div",{ref:n,style:o,class:[Ge(),e.className]},[(c=t.default)==null?void 0:c.call(t)]),[[Q,e.show]])});return W("touchmove",a,{target:n}),()=>v(q,{name:"van-fade",appear:!0},{default:l})}});const Ze=D(Ue),Ye=T({},oe,{round:Boolean,position:y("center"),closeIcon:y("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:y("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[He,p]=w("popup");var We=k({name:He,inheritAttrs:!1,props:Ye,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:t,attrs:n,slots:s}){let a,l;const c=$(),o=$(),r=ae(()=>e.show||!e.lazyRender),i=z(()=>{const u={zIndex:c.value};if(R(e.duration)){const h=e.position==="center"?"animationDuration":"transitionDuration";u[h]=`${e.duration}s`}return u}),f=()=>{a||(a=!0,c.value=e.zIndex!==void 0?+e.zIndex:Te(),t("open"))},d=()=>{a&&ke(e.beforeClose,{done(){a=!1,t("close"),t("update:show",!1)}})},m=u=>{t("clickOverlay",u),e.closeOnClickOverlay&&d()},P=()=>{if(e.overlay)return v(Ze,{show:e.show,class:e.overlayClass,zIndex:c.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0,onClick:m},{default:s["overlay-content"]})},C=u=>{t("clickCloseIcon",u),d()},E=()=>{if(e.closeable)return v(Ke,{role:"button",tabindex:0,name:e.closeIcon,class:[p("close-icon",e.closeIconPosition),we],classPrefix:e.iconPrefix,onClick:C},null)},O=()=>t("opened"),se=()=>t("closed"),ce=u=>t("keydown",u),le=r(()=>{var u;const{round:h,position:B,safeAreaInsetTop:_,safeAreaInsetBottom:re}=e;return J(v("div",Z({ref:o,style:i.value,role:"dialog",tabindex:0,class:[p({round:h,[B]:B}),{"van-safe-area-top":_,"van-safe-area-bottom":re}],onKeydown:ce},n),[(u=s.default)==null?void 0:u.call(s),E()]),[[Q,e.show]])}),V=()=>{const{position:u,transition:h,transitionAppear:B}=e,_=u==="center"?"van-fade":`van-popup-slide-${u}`;return v(q,{name:h||_,appear:B,onAfterEnter:O,onAfterLeave:se},{default:le})};return S(()=>e.show,u=>{u&&!a&&(f(),n.tabindex===0&&Oe(()=>{var h;(h=o.value)==null||h.focus()})),!u&&a&&(a=!1,t("close"))}),Ce({popupRef:o}),pe(o,()=>e.show&&e.lockScroll),W("popstate",()=>{e.closeOnPopstate&&(d(),l=!1)}),Pe(()=>{e.show&&f()}),G(()=>{l&&(t("update:show",!0),l=!1)}),L(()=>{e.show&&e.teleport&&(d(),l=!0)}),U(X,()=>e.show),()=>e.teleport?v(xe,{to:e.teleport},{default:()=>[P(),V()]}):v(Se,null,[P(),V()])}});const nt=D(We);export{Xe as B,Ke as I,nt as P,tt as a,Qe as b,Je as c,ke as d,et as o,oe as p,Ce as u};
