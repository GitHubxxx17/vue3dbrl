import{_ as x,a5 as L,V as P,r as d,i as V,b as S,c as I,d as e,f as W,p as C,h as $,a as B,t as M,w as v,W as y,u as h,U as T,v as D}from"./index-a005ceea.js";import{u as F,M as H,U as z}from"./memory-9a4b206b.js";const _=n=>(C("data-v-16626532"),n=n(),$(),n),E={class:"header_left"},R={class:"daoru"},j=_(()=>e("span",{class:"icon iconfont icon-daoru"},null,-1)),A=_(()=>e("div",{class:"name"},"导入",-1)),q=_(()=>e("span",{class:"shuxian"},"|",-1)),G={class:"kuohao"},J=_(()=>e("span",{class:"icon iconfont icon-gongxiangtubiaozhuangtaileicaozuolei37"},null,-1)),K=_(()=>e("div",{class:"name"},"保存",-1)),O=[J,K],Q={__name:"Mkheader",props:["tp"],setup(n){const s=n,l=L(),i=P();let p=d(null),c=d(null),u=d(null),f=d(null);const g=()=>{p.value.offsetLeft==0?(p.value.style.left=25/3.95+"vw",p.value.style.backgroundColor="#b6a2f0",c.value.style.backgroundColor="#8777ae",l.isIdentifyWk=!0):(p.value.style.left="0px",p.value.style.backgroundColor="#bfbfbf",c.value.style.backgroundColor="#b1adbb",l.isIdentifyWk=!1)},m=t=>{t.stopPropagation(),l.tipsIsShow=!l.tipsIsShow},w=t=>{if(t.stopPropagation(),s.tp.modleTitle==""){l.popup2IsShow=!0,l.popup2Cont="标题不能为空";return}for(let o of i.tp)if(s.tp.modleTitle==o.modleTitle){l.popup2IsShow=!0,l.popup2Cont="标题不能重复";return}s.tp.label=="标签"?(l.popup2IsShow=!0,l.popup2Cont="标签不能为空"):l.popupisShow=!0};V(()=>l.tipsIsShow,(t,o)=>{t&&(u.value.style.transform="scale(1)"),o&&(u.value.style.transform="scale(0)")});const b=async t=>{let o=t.target.files[0];if(console.log(o),t.target.files.length!=0){l.isLoading=!0;let a=new FormData(f.value),k=await F(a);if(console.log(k),k.data.msg.code==200){l.isLoading=!1;let U=k.data.msg.data.context.replaceAll(`
`,"<br>");s.tp.context=U,s.tp.modleTitle=o.name,t.target.value="",l.popup2IsShow=!0,l.popup2Cont="文件解析成功"}}};return(t,o)=>(S(),I("header",null,[e("div",E,[e("div",R,[j,A,e("form",{class:"upload_form",ref_key:"upload_form",ref:f},[e("input",{type:"file",accept:"application/msword, application/pdf ",name:"upLoadFile",onChange:o[0]||(o[0]=a=>b(a))},null,32)],512)]),q,e("div",G,[e("div",{class:"switch",ref_key:"switchRef",ref:c,onClick:g},[e("div",{class:"ball",ref_key:"ball",ref:p},null,512)],512),W("   "),e("span",{onClick:o[1]||(o[1]=a=>m(a)),class:"iconfont icon-tuoyuankaobei"})]),e("div",{class:"tips",ref_key:"tips",ref:u},"打开开关即可自动识别括号挖空",512)]),e("div",{class:"header_right",onClick:o[2]||(o[2]=a=>w(a))},O)]))}},X=x(Q,[["__scopeId","data-v-16626532"]]);const Y={},N=n=>(C("data-v-662cc238"),n=n(),$(),n),Z={class:"loading"},ee=N(()=>e("div",{class:"spinner"},null,-1)),oe=N(()=>e("div",{class:"text"},"上传文件中",-1)),te=[ee,oe];function se(n,s){return S(),I("div",Z,te)}const le=x(Y,[["render",se],["__scopeId","data-v-662cc238"]]);const r=n=>(C("data-v-faa60eee"),n=n(),$(),n),ae={class:"popup"},ne={class:"popup2 modify_succani2"},ie={class:"popup_box"},pe={class:"container"},ce={class:"title"},de={class:"label_cont"},ue=r(()=>e("span",{class:"icon iconfont icon-xiangxiajiantou"},null,-1)),_e=r(()=>e("div",{class:"triangle"},null,-1)),re=r(()=>e("li",null,"考研",-1)),fe=r(()=>e("li",null,"教资",-1)),ve=r(()=>e("li",null,"通识课",-1)),he=[re,fe,ve],ge={__name:"MakingPage",setup(n){const s=L(),l=P(),i=B({context:"",modleTitle:"",label:"标签"});let p=d(null),c=d(null);s.popup2IsShow=!1,s.popupisShow=!1,s.tipsIsShow=!1;const u=()=>{c.value.style.transform="scale(0)",s.tipsIsShow=!1,s.popupisShow=!1,s.popup2IsShow=!1},f=t=>{t.stopPropagation()},g=t=>{t.stopPropagation(),c.value.style.transform="scale(1)"},m=t=>{t.stopPropagation(),t.target.tagName=="LI"&&(i.label=t.target.innerHTML,c.value.style.transform="scale(0)")};V(()=>i.context,()=>{p.value.innerHTML=i.context});async function w(){let t=await H(p.value.innerHTML,i.modleTitle,0,l.switchLabel(!1,i.label));console.log(t),t.data.msg.code==200&&(l.getTp(z),s.popup2IsShow=!0,s.popup2Cont="保存成功",s.popupisShow=!1)}const b=()=>{};return(t,o)=>(S(),I("div",{class:"Making_page",onClick:u},[M(X,{tp:i},null,8,["tp"]),v(M(le,null,null,512),[[y,h(s).isLoading]]),v(e("div",ae,[e("div",{class:"popup_box",onClick:o[1]||(o[1]=a=>f(a))},[e("button",{onClick:w},"直接保存"),e("button",{onClick:o[0]||(o[0]=a=>b())},"进入编辑")])],512),[[y,h(s).popupisShow]]),v(e("div",ne,[e("div",ie,T(h(s).popup2Cont),1)],512),[[y,h(s).popup2IsShow]]),e("div",pe,[e("div",ce,[e("div",{class:"label",onClick:o[3]||(o[3]=a=>g(a))},[e("div",de,[e("span",null,T(i.label),1),ue]),e("div",{class:"label_menu",ref_key:"label_menu",ref:c},[_e,e("ul",{onClick:o[2]||(o[2]=a=>m(a))},he)],512)]),v(e("input",{type:"text","onUpdate:modelValue":o[4]||(o[4]=a=>i.modleTitle=a)},null,512),[[D,i.modleTitle]])]),e("div",{class:"text_box",ref_key:"text_box",ref:p,contenteditable:"true"},null,512)])]))}},be=x(ge,[["__scopeId","data-v-faa60eee"]]);export{be as default};
